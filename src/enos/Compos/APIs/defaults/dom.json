{"root":{"modules":[{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","id":"_hive__kmpzwxuvtmodule_8ri3883lp","_id":"_hive__kmpzwxuvtmodule_8ri3883lp","isTemplate":false,"isGallery":false,"oldID":"","meta":[],"bg":"","name":"Main Loop Module","pos":{"x":104.65149349751405,"y":45.610152467143564},"size":{"w":200,"h":40},"src":"/* global env */\n/* eslint-disable */\nlet {\n  Signal,\n  Resources,\n  sockets,\n  box,\n  IO,\n  Input,\n  Output,\n  OutputAll\n} = env\n/* esltint-enable */\nconsole.log('========' + 'box.name' + 'is Ready.  ========')\n// sender\n\nlet startTime = performance.now();\n\nlet rAFID = 0\nlet event = {}\nlet rAF = () => {\n  rAFID = window.requestAnimationFrame(rAF);\n\n  event.time = performance.now();\n\n  OutputAll(event);\n}\nrAFID = window.requestAnimationFrame(rAF);\n\nInput('onClock', (evt) => {\n  OutputAll(evt);\n}, () => {\n  // cancenl the loop for the recorder\n  cancelAnimationFrame(rAFID);\n})\n  "},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","id":"_hive__kmpzwxuvtmodule_1a8va3na3","_id":"_hive__kmpzwxuvtmodule_1a8va3na3","isTemplate":false,"isGallery":false,"oldID":"","meta":[],"bg":"","name":"Dom Updater Module","pos":{"x":204.133809368063,"y":283.45076271462653},"size":{"w":200,"h":40},"src":"/* global env */\n/* eslint-disable */\nlet {\n  Signal,\n  Resources,\n  sockets,\n  box,\n  IO,\n  Input,\n  Output,\n  OutputAll\n} = env\n/* esltint-enable */\nconsole.log('Environment is ready for you!::', box.id)\n\nlet degree = 0\n\nInput('onTimeline', (tl) => {\n  degree = tl.degree.timebox\n  console.log(tl.degree.timebox)\n});\n\nlet h = {\n  fillBackground: () => {\n    let gradBg = ''\n    gradBg += `linear-gradient(${degree * 360 * 10}deg, `\n    gradBg += '    hsl(' + Math.floor(Math.abs(0.5 - degree) * 360)  + ', 50%, 50%), '\n    gradBg += '    hsl(' + Math.floor(Math.abs(1.25 - degree) * 360)  + ', 50%, 50%) '\n    gradBg += ')'\n\n    Resources.get('rootDOM')\n      .style\n      .background = gradBg\n  }\n}\n\nvar i = 0;\nInput(0, () => {\n  h.fillBackground(i / 100);\n  i++\n  i = i % 100;\n});\n"},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","id":"_hive__65uw2ywi7module_kv2r1xupj","_id":"_hive__65uw2ywi7module_kv2r1xupj","isTemplate":false,"isGallery":false,"oldID":"","meta":[{"id":"_r15339132","label":"degree","type":"timeline-track","value":{"start":0,"afterStart":3,"beforeEnd":12,"end":15,"totalTime":15}}],"bg":"","name":"Timeline","pos":{"x":294.64965500984187,"y":155.3473108097976},"size":{"w":200,"h":40},"src":"/* global env */\n/* eslint-disable */\nlet {\nSignal,\nResources,\nsockets,\nbox,\nInput,\nOutput,\nOutputAll,\ngetMeta\n} = env\n/* esltint-enable */\nconsole.log(`========  ${box.name} is Ready.  ========`)\n// sender\n\nlet startTime = performance.now() / 1000\n\nInput('onFrame', (evt) => {\n  let timeMode = window.top[box.id + '-timeMode']\n  let progress = window.top[box.id + '-progress']\n  // console.log(timeMode)\n  \n  let timetracks = box.meta.filter(e => e.type === 'timeline-track')\n  timetracks.forEach((m, mi) => {\n    let time = 0\n    \n    if (timeMode === 'toEnv') {\n      time = (progress * m.value.totalTime)\n    } else {\n      time = evt.time / 1000 - startTime\n      if (time > m.value.totalTime) {\n        startTime = evt.time / 1000\n      }\n    }\n    \n    updateTimeValue({ time, mVal: m.value, totalTime: m.value.totalTime })\n  })\n  \n  // tell UI\n  if (timetracks.length > 0) {\n    let m = timetracks[0]\n    let time = performance.now() / 1000 - startTime\n    window.top.postMessage({ type: 'timeline', modID: box.id, time, totalTime: m.value.totalTime, progress: time / m.value.totalTime }, window.location.origin)\n  }\n})\n\n\nlet updateTimeValue = ({ time, mVal, totalTime }) => {\n  mVal.time = time\n  \n  // ---------------------------------\n  // periods\n  //  starting\n  if (time >= mVal.start && time <= mVal.afterStart) {\n    let progress = (time - mVal.start) / (mVal.afterStart - mVal.start)\n    mVal.starting = progress\n    mVal.mode = 'starting'\n    mVal.var = progress\n  }\n  \n  // periods\n  // during\n  if (time >= mVal.afterStart && time <= mVal.beforeEnd) {\n    let progress = (time - mVal.afterStart) / (mVal.beforeEnd - mVal.afterStart)\n    mVal.during = progress\n    mVal.mode = 'during'\n    mVal.var = 1.0\n  }\n  \n  // periods\n  //  leaving\n  if (time >= mVal.beforeEnd && time <= mVal.end) {\n    let progress = 1.0 - (mVal.end - time) / (mVal.end - mVal.beforeEnd)\n    mVal.leaving = 1.0 - progress\n    mVal.mode = 'leaving'\n    mVal.var = 1.0 - progress\n  }\n  \n  // ---------------------------------\n  \n  // overriders\n  // before start\n  if (time < mVal.start) {\n    let progress = 0\n    mVal.starting = 0\n    mVal.mode = 'beforeStart'\n    mVal.beforeStart = 0\n    mVal.var = 0\n  }\n  \n  // after end\n  if (time > mVal.end) {\n    let progress = 0\n    mVal.leaving = 0\n    mVal.afterEnd = 0\n    mVal.mode = 'afterEnd'\n    mVal.var = 0\n  }\n  \n  // timebox mVal\n  // timebox\n  if (time >= mVal.start && time <= mVal.end) {\n    let progress = (time - mVal.start) / (mVal.end - mVal.start)\n    mVal.timebox = progress\n  }\n  \n  mVal.tick = time / totalTime\n  mVal.now = time\n};\n\nlet event = {\n  $ready: true\n}\nlet setToEvent = (key) => {\n  event[key] = getMeta(key)\n}\n\nInput('onFrame', (v) => {\n  let tracks = box.meta.filter(e => e.type === 'timeline-track');\n  tracks.forEach((m, mi) => {\n    setToEvent(m.label);\n  });\n  OutputAll(event);\n});\n\n\n// this.onClean = () => {\n//   window.cancelAnimationFrame(rAFID);\n//   console.log('onClean', box.id)\n// }\n"}],"connectors":[{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_tazqg4avl","_id":"_hive__kmpzwxuvtsocket_tazqg4avl","isTemplate":false,"isGallery":false,"type":"input","idx":1549062751488,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_tazqg4avl","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_wsit7ilwf","_id":"_hive__kmpzwxuvtsocket_wsit7ilwf","isTemplate":false,"isGallery":false,"type":"input","idx":1549062751489,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_wsit7ilwf","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_t56asumak","_id":"_hive__kmpzwxuvtsocket_t56asumak","isTemplate":false,"isGallery":false,"type":"input","idx":1549062751490,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_t56asumak","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_nj526uvgj","_id":"_hive__kmpzwxuvtsocket_nj526uvgj","isTemplate":false,"isGallery":false,"type":"input","idx":1549062751491,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_nj526uvgj","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_e1geg4khm","_id":"_hive__kmpzwxuvtsocket_e1geg4khm","isTemplate":false,"isGallery":false,"type":"output","idx":1549062751492,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":"_hive__kmpzwxuvtmodule_1a8va3na3"},"socket":{"from":"_hive__kmpzwxuvtsocket_e1geg4khm","to":"_hive__kmpzwxuvtsocket_oj3wl25lm"},"onHand":false},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_0z2eer5u7","_id":"_hive__kmpzwxuvtsocket_0z2eer5u7","isTemplate":false,"isGallery":false,"type":"output","idx":1549062751493,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_0z2eer5u7","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_vsnka2da3","_id":"_hive__kmpzwxuvtsocket_vsnka2da3","isTemplate":false,"isGallery":false,"type":"output","idx":1549062751494,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_vsnka2da3","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_op7btzilb","_id":"_hive__kmpzwxuvtsocket_op7btzilb","isTemplate":false,"isGallery":false,"type":"output","idx":1549062751495,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_8ri3883lp","mod":{"from":"_hive__kmpzwxuvtmodule_8ri3883lp","to":"_hive__65uw2ywi7module_kv2r1xupj"},"socket":{"from":"_hive__kmpzwxuvtsocket_op7btzilb","to":"_hive__65uw2ywi7socket_tlqqyj9z3"},"onHand":false},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_oj3wl25lm","_id":"_hive__kmpzwxuvtsocket_oj3wl25lm","isTemplate":false,"isGallery":false,"type":"input","idx":1549062752109,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":"_hive__kmpzwxuvtmodule_8ri3883lp"},"socket":{"from":"_hive__kmpzwxuvtsocket_oj3wl25lm","to":"_hive__kmpzwxuvtsocket_e1geg4khm"}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_9r92etc98","_id":"_hive__kmpzwxuvtsocket_9r92etc98","isTemplate":false,"isGallery":false,"type":"input","idx":1549062752110,"name":"onTimeline","color":"#00e9e7","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":"_hive__65uw2ywi7module_kv2r1xupj"},"socket":{"from":"_hive__kmpzwxuvtsocket_9r92etc98","to":"_hive__65uw2ywi7socket_f59ug5ime"}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_pknvu0u34","_id":"_hive__kmpzwxuvtsocket_pknvu0u34","isTemplate":false,"isGallery":false,"type":"input","idx":1549062752111,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_pknvu0u34","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_hkxy3nh2t","_id":"_hive__kmpzwxuvtsocket_hkxy3nh2t","isTemplate":false,"isGallery":false,"type":"input","idx":1549062752112,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_hkxy3nh2t","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_s60372ugm","_id":"_hive__kmpzwxuvtsocket_s60372ugm","isTemplate":false,"isGallery":false,"type":"output","idx":1549062752113,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_s60372ugm","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_x237v033r","_id":"_hive__kmpzwxuvtsocket_x237v033r","isTemplate":false,"isGallery":false,"type":"output","idx":1549062752114,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_x237v033r","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_zqwqvvedp","_id":"_hive__kmpzwxuvtsocket_zqwqvvedp","isTemplate":false,"isGallery":false,"type":"output","idx":1549062752115,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_zqwqvvedp","to":""}},{"userID":"_kmpzwxuvt","projectID":"_kmpzwxuvt","oldID":"","id":"_hive__kmpzwxuvtsocket_7vek35d5d","_id":"_hive__kmpzwxuvtsocket_7vek35d5d","isTemplate":false,"isGallery":false,"type":"output","idx":1549062752116,"name":"my socket","color":"#e4e3e5","modID":"_hive__kmpzwxuvtmodule_1a8va3na3","mod":{"from":"_hive__kmpzwxuvtmodule_1a8va3na3","to":""},"socket":{"from":"_hive__kmpzwxuvtsocket_7vek35d5d","to":""}},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_tlqqyj9z3","_id":"_hive__65uw2ywi7socket_tlqqyj9z3","isTemplate":false,"isGallery":false,"type":"input","idx":1549068530505,"name":"onFrame","color":"#e4e3e5","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":"_hive__kmpzwxuvtmodule_8ri3883lp"},"socket":{"from":"_hive__65uw2ywi7socket_tlqqyj9z3","to":"_hive__kmpzwxuvtsocket_op7btzilb"}},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_j4aen4tfd","_id":"_hive__65uw2ywi7socket_j4aen4tfd","isTemplate":false,"isGallery":false,"type":"input","idx":1549068530506,"name":"my socket","color":"#e4e3e5","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":""},"socket":{"from":"_hive__65uw2ywi7socket_j4aen4tfd","to":""}},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_1umq2d8mx","_id":"_hive__65uw2ywi7socket_1umq2d8mx","isTemplate":false,"isGallery":false,"type":"input","idx":1549068530507,"name":"my socket","color":"#e4e3e5","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":""},"socket":{"from":"_hive__65uw2ywi7socket_1umq2d8mx","to":""}},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_fjac3rf4z","_id":"_hive__65uw2ywi7socket_fjac3rf4z","isTemplate":false,"isGallery":false,"type":"input","idx":1549068530508,"name":"my socket","color":"#e4e3e5","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":""},"socket":{"from":"_hive__65uw2ywi7socket_fjac3rf4z","to":""}},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_f59ug5ime","_id":"_hive__65uw2ywi7socket_f59ug5ime","isTemplate":false,"isGallery":false,"type":"output","idx":1549068530509,"name":"onFrame","color":"#00e94e","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":"_hive__kmpzwxuvtmodule_1a8va3na3"},"socket":{"from":"_hive__65uw2ywi7socket_f59ug5ime","to":"_hive__kmpzwxuvtsocket_9r92etc98"},"onHand":false},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_u9mmi7d1x","_id":"_hive__65uw2ywi7socket_u9mmi7d1x","isTemplate":false,"isGallery":false,"type":"output","idx":1549068530510,"name":"my socket","color":"#e4e3e5","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":""},"socket":{"from":"_hive__65uw2ywi7socket_u9mmi7d1x","to":""}},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_9ys0tyid4","_id":"_hive__65uw2ywi7socket_9ys0tyid4","isTemplate":false,"isGallery":false,"type":"output","idx":1549068530511,"name":"my socket","color":"#e4e3e5","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":""},"socket":{"from":"_hive__65uw2ywi7socket_9ys0tyid4","to":""}},{"userID":"_65uw2ywi7","projectID":"_65uw2ywi7","oldID":"","id":"_hive__65uw2ywi7socket_42q66o2yh","_id":"_hive__65uw2ywi7socket_42q66o2yh","isTemplate":false,"isGallery":false,"type":"output","idx":1549068530512,"name":"my socket","color":"#e4e3e5","modID":"_hive__65uw2ywi7module_kv2r1xupj","mod":{"from":"_hive__65uw2ywi7module_kv2r1xupj","to":""},"socket":{"from":"_hive__65uw2ywi7socket_42q66o2yh","to":""}}]},"versions":[],"sessionID":"_ksg1jo4wh","projectID":"_ksg1jo4wh","userID":"_ksg1jo4wh"}